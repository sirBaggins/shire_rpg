{% extends "layout.html" %}

{% block title %}Register{% endblock %}

{% block main %}

<article class="form-box">
    <div class="form-box-inside">
        <form action="/register" method="post">
            <!-- email -->
            <label for="email" class="yellow-shadow">Insert your email: </label>
            <input type="email" name="email" placeholder="you@email.com" minlength="4" maxlength="50" required
                autofocus>

            <!-- password -->
            <label for="password" class="yellow-shadow">Insert your password: </label>
            <div>
                <span>
                    <input type="password" name="password" id="password" placeholder="Password" minlength="8"
                        maxlength="16" required>
                </span>
                <span onclick="eye('password', 'eye_1')">
                    <svg fill="#000000" height="20px" width="20px" version="1.1" id="eye_1"
                        xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                        viewBox="0 0 512 512" xml:space="preserve">
                        <g>
                            <g>
                                <path d="M507.418,241.382C503.467,235.708,409.003,102.4,256,102.4S8.533,235.708,4.582,241.382c-6.11,8.789-6.11,20.446,0,29.235
        C8.533,276.292,102.997,409.6,256,409.6s247.467-133.308,251.418-138.982C513.528,261.828,513.528,250.172,507.418,241.382z
         M256,384C114.62,384,25.6,256,25.6,256S114.62,128,256,128s230.4,128,230.4,128S397.38,384,256,384z" />
                            </g>
                        </g>
                        <g>
                            <g>
                                <path d="M256,153.6c-56.55,0-102.4,45.841-102.4,102.4S199.441,358.4,256,358.4c56.559,0,102.4-45.841,102.4-102.4
        S312.55,153.6,256,153.6z M256,332.8c-42.351,0-76.8-34.449-76.8-76.8s34.449-76.8,76.8-76.8c42.351,0,76.8,34.449,76.8,76.8
        C332.8,298.351,298.351,332.8,256,332.8z" />
                            </g>
                        </g>
                    </svg>
                </span>
            </div>

            <!-- confirm password -->
            <div>
                <span>
                    <input type="password" name="confirmPassword" id="confirmPassword" placeholder="Confirm password"
                        minlength="8" maxlength="16"
                        oninput="check('password', 'confirmPassword', 'Passwords doesn\'t match.')" required>
                </span>
                <span onclick="eye('confirmPassword', 'eye_2')">
                    <svg fill="#000000" height="20px" width="20px" version="1.1" id="eye_2"
                        xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                        viewBox="0 0 512 512" xml:space="preserve">
                        <g>
                            <g>
                                <path d="M507.418,241.382C503.467,235.708,409.003,102.4,256,102.4S8.533,235.708,4.582,241.382c-6.11,8.789-6.11,20.446,0,29.235
        C8.533,276.292,102.997,409.6,256,409.6s247.467-133.308,251.418-138.982C513.528,261.828,513.528,250.172,507.418,241.382z
         M256,384C114.62,384,25.6,256,25.6,256S114.62,128,256,128s230.4,128,230.4,128S397.38,384,256,384z" />
                            </g>
                        </g>
                        <g>
                            <g>
                                <path d="M256,153.6c-56.55,0-102.4,45.841-102.4,102.4S199.441,358.4,256,358.4c56.559,0,102.4-45.841,102.4-102.4
        S312.55,153.6,256,153.6z M256,332.8c-42.351,0-76.8-34.449-76.8-76.8s34.449-76.8,76.8-76.8c42.351,0,76.8,34.449,76.8,76.8
        C332.8,298.351,298.351,332.8,256,332.8z" />
                            </g>
                        </g>
                    </svg>
                </span>
            </div>
            <!-- submit -->
            <div class="button-box">
                <button type="submit" class="register__btn">Register</button>
            </div>
        </form>
    </div>
    <div>
        {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
        {% for category, message in messages %}
        <div class="flashed {{ category }}">
            <h5>{{ message }}</h5>
            {% endfor %}
        </div>
        {% endif %}
        {% endwith %}
    </div>
</article>



<script>
    function eye(clickID, svgID) {
        let check = document.getElementById(clickID);
        let svg = document.getElementById(svgID);

        if (check.type === "password") {
            check.type = "text";
            svg.innerHTML = `
            <g>
	            <g>
		            <g>
			            <path d="M256,130.402c-69.255,0-125.597,56.343-125.597,125.597S186.745,381.597,256,381.597S381.597,325.254,381.597,256
                            S325.255,130.402,256,130.402z M199.876,271.978c-8.824,0-15.979-7.154-15.979-15.979c0-8.824,7.154-15.978,15.979-15.978
                            c8.824,0,15.978,7.154,15.978,15.978C215.856,264.824,208.702,271.978,199.876,271.978z M256,271.978
                            c-8.824,0-15.978-7.154-15.978-15.979c0-8.824,7.154-15.978,15.978-15.978s15.978,7.154,15.978,15.978
                            C271.978,264.824,264.824,271.978,256,271.978z M312.122,271.978c-8.824,0-15.978-7.154-15.978-15.979
                            c0-8.824,7.154-15.978,15.978-15.978c8.824,0,15.979,7.154,15.979,15.978C328.102,264.824,320.948,271.978,312.122,271.978z"/>
			            <path d="M511.074,250.323C474.294,140.605,371.787,66.887,256,66.887S37.706,140.605,0.925,250.323
                            c-1.234,3.684-1.234,7.669,0,11.353C37.706,371.395,140.213,445.112,256,445.112s218.294-73.717,255.075-183.436
                            C512.308,257.993,512.308,254.007,511.074,250.323z M256,417.318c-88.951,0-161.318-72.367-161.318-161.318
                            S167.049,94.681,256,94.681S417.318,167.049,417.318,256S344.951,417.318,256,417.318z"/>
                    </g>
                </g>
            </g>`;

        } else {
            check.type = "password";
            svg.innerHTML = `
            xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                        viewBox="0 0 512 512" xml:space="preserve">
                        <g>
                            <g>
                                <path d="M507.418,241.382C503.467,235.708,409.003,102.4,256,102.4S8.533,235.708,4.582,241.382c-6.11,8.789-6.11,20.446,0,29.235
        C8.533,276.292,102.997,409.6,256,409.6s247.467-133.308,251.418-138.982C513.528,261.828,513.528,250.172,507.418,241.382z
         M256,384C114.62,384,25.6,256,25.6,256S114.62,128,256,128s230.4,128,230.4,128S397.38,384,256,384z" />
                            </g>
                        </g>
                        <g>
                            <g>
                                <path d="M256,153.6c-56.55,0-102.4,45.841-102.4,102.4S199.441,358.4,256,358.4c56.559,0,102.4-45.841,102.4-102.4
        S312.55,153.6,256,153.6z M256,332.8c-42.351,0-76.8-34.449-76.8-76.8s34.449-76.8,76.8-76.8c42.351,0,76.8,34.449,76.8,76.8
        C332.8,298.351,298.351,332.8,256,332.8z" />
                            </g>
                        </g>`;
        }
    }

    function check(id1, id2, message) {
        let input1 = document.getElementById(id1);
        let input2 = document.getElementById(id2);

        if (input1.value != input2.value) {
            input2.setCustomValidity(message);
        }
        else {
            input2.setCustomValidity("");
        }

    }
</script>

{% endblock %}